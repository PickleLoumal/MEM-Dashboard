<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Chinese Stock Dashboard – Landing</title>

    <!-- Favicon (tiny inline to avoid 404s) -->
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==">

    <!-- Global styles and navigation -->
    <link rel="stylesheet" href="assets/css/app-base.css">
    <link rel="stylesheet" href="assets/css/global-nav.css">
    <script src="assets/js/components/global-nav.js"></script>

    <!-- API config and utilities (for live stats) -->
    <script src="config/csi300_api_config.js?v=20251007-fix"></script>
    <script src="assets/js/utils/csi300_api_client.js?v=20251007-fix"></script>
    <script src="assets/js/utils/csi300_error_handler.js?v=20251007-fix"></script>

    <style>
        /* Page scaffolding */
        body { background: var(--app-body-bg); }

        .hero {
            position: relative;
            background: radial-gradient(1200px 600px at 10% -10%, #e8eefc 0%, rgba(232,238,252,0) 55%),
                        radial-gradient(1200px 600px at 90% -10%, #f2f7ff 0%, rgba(242,247,255,0) 55%),
                        linear-gradient(180deg, #ffffff 0%, #f7f8fc 100%);
            padding: 72px 0 48px;
        }

        .hero-inner {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
            display: grid;
            grid-template-columns: 1.1fr 0.9fr;
            gap: 32px;
            align-items: center;
        }

        .hero-title {
            font-size: 40px;
            font-weight: 800;
            color: var(--app-heading);
            letter-spacing: -0.02em;
            margin-bottom: 12px;
        }

        .hero-subtitle {
            font-size: 16px;
            color: var(--app-text-muted);
            margin-bottom: 20px;
        }

        .hero-ctas { display: flex; gap: 12px; flex-wrap: wrap; }

        .hero-card {
            background: var(--app-surface);
            border-radius: var(--app-radius-lg);
            border: 1px solid var(--app-border);
            box-shadow: var(--app-shadow-soft);
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 16px;
        }

        .stat {
            display: flex;
            flex-direction: column;
            gap: 4px;
            padding: 12px 14px;
            border-radius: var(--app-radius-md);
            background: var(--app-surface-muted);
            border: 1px solid var(--app-border);
        }
        .stat-value { font-size: 20px; font-weight: 700; color: var(--app-heading); }
        .stat-label { font-size: 12px; color: var(--app-text-muted); text-transform: uppercase; letter-spacing: .06em; }

        .section { max-width: 1200px; margin: 0 auto; padding: 32px 24px; }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 20px;
        }

        .feature-card {
            background: var(--app-surface);
            border-radius: var(--app-radius-lg);
            border: 1px solid var(--app-border);
            box-shadow: var(--app-shadow-subtle);
            padding: 20px;
        }
        .feature-title { font-size: 16px; font-weight: 700; color: var(--app-heading); margin-bottom: 6px; }
        .feature-desc { font-size: 14px; color: var(--app-text-muted); }

        .quicklinks {
            display: grid;
            grid-template-columns: repeat(4, minmax(0, 1fr));
            gap: 16px;
        }
        .quicklink {
            display: flex; align-items: center; justify-content: space-between;
            padding: 14px 16px; border-radius: var(--app-radius-md);
            background: var(--app-surface);
            border: 1px solid var(--app-border);
            color: var(--app-heading);
            font-weight: 600;
        }
        .quicklink span { color: var(--app-text-muted); font-weight: 500; font-size: 13px; }

        .footer { color: var(--app-text-muted); font-size: 13px; text-align: center; padding: 16px 0 40px; }

        @media (max-width: 960px) {
            .hero-inner { grid-template-columns: 1fr; }
            .features-grid { grid-template-columns: 1fr 1fr; }
            .quicklinks { grid-template-columns: 1fr 1fr; }
        }
        @media (max-width: 640px) {
            .features-grid { grid-template-columns: 1fr; }
            .quicklinks { grid-template-columns: 1fr; }
            .hero-title { font-size: 32px; }
        }
    </style>
</head>
<body>
    <!-- GlobalNav injects itself at body start -->

    <!-- Hero -->
    <section class="hero">
        <div class="hero-inner">
            <div>
                <h1 class="hero-title">Chinese Stock Dashboard</h1>
                <p class="hero-subtitle">A unified toolkit to filter, compare, and analyze Chinese stock companies with professional, configurable views.</p>
                <div class="hero-ctas">
                    <a href="index.html" class="app-button app-button--primary">Start Filtering</a>
                    <a href="browser.html" class="app-button app-button--secondary">Browse All Companies</a>
                    <a href="peer-comparison.html" class="app-button app-button--secondary">Peer Comparison</a>
                </div>
            </div>
            <div class="hero-card">
                <div class="stat">
                    <div class="stat-value" id="statCompanies">—</div>
                    <div class="stat-label">Companies Tracked</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="statSectors">—</div>
                <div class="stat-label">Industry Matrix Sectors</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="statIndustries">—</div>
                    <div class="stat-label">Industries</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="statUpdated">—</div>
                    <div class="stat-label">Data Status</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features -->
    <section class="section">
        <header class="app-section-header">
            <h2 class="app-section-title">What You Can Do</h2>
            <p class="app-section-subtitle">Core capabilities designed for speed and clarity</p>
        </header>
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-title">Company Filter</div>
                <div class="feature-desc">Filter by IM sector and industry with instant feedback, then deep-dive into results.</div>
            </div>
            <div class="feature-card">
                <div class="feature-title">Flexible Columns</div>
                <div class="feature-desc">Customize visible columns with presets, search, and pinning to keep what matters on screen.</div>
            </div>
            <div class="feature-card">
                <div class="feature-title">Peer Comparison</div>
                <div class="feature-desc">Compare peers side-by-side to spot outliers and leaders quickly.</div>
            </div>
            <div class="feature-card">
                <div class="feature-title">Value Chain</div>
                <div class="feature-desc">Explore upstream/downstream dynamics for selected industries and companies.</div>
            </div>
            <div class="feature-card">
                <div class="feature-title">Clean Navigation</div>
                <div class="feature-desc">Apple-inspired global navigation keeps tools accessible without getting in the way.</div>
            </div>
            <div class="feature-card">
                <div class="feature-title">Consistent UI</div>
                <div class="feature-desc">Unified typography, spacing, and components for a focused, professional experience.</div>
            </div>
        </div>
    </section>

    <!-- Quick Links -->
    <section class="section">
        <header class="app-section-header">
            <h2 class="app-section-title">Quick Links</h2>
            <p class="app-section-subtitle">Jump straight into key workflows</p>
        </header>
        <div class="quicklinks">
            <a class="quicklink" href="index.html">Company Filter <span>setup</span></a>
            <a class="quicklink" href="browser.html">Browse All <span>results</span></a>
            <a class="quicklink" href="peer-comparison.html">Peer Comparison <span>table</span></a>
            <a class="quicklink" href="value-chain/index.html">Value Chain <span>explorer</span></a>
        </div>
    </section>

    <section class="section">
        <p class="footer">Chinese Stock Dashboard • Internal research tooling</p>
    </section>

    <script>
        // Lightweight landing stats using existing API client
        (function initLandingStats() {
            try {
                const api = window.csi300ApiClient;
                if (!api) return;

                api.getFilterOptions().then((data) => {
                    const total = data.total_count ?? data.company_count ?? data.total_companies ?? null;
                    const sectors = (data.im_sectors?.length) || (data.im_codes?.length) || null;
                    const industries = (data.industries?.length) || null;

                    document.getElementById('statCompanies').textContent = total != null ? String(total) : '—';
                    document.getElementById('statSectors').textContent = sectors != null ? String(sectors) : '—';
                    document.getElementById('statIndustries').textContent = industries != null ? String(industries) : '—';
                    document.getElementById('statUpdated').textContent = total != null ? 'Online' : 'N/A';
                }).catch(() => {
                    document.getElementById('statUpdated').textContent = 'Offline';
                });
            } catch (err) {
                // no-op
            }
        })();
    </script>
</body>
</html>
