import{j as e,r as v,G as I,R as F,a as L}from"./main-C6QWjLiy.js";const P="http://localhost:8001".replace(/\/$/,""),B="/api/csi300/api/companies/{id}/",O="/api/csi300/api/companies/{id}/industry_peers_comparison/";async function q(t){const a=`${P}${B.replace("{id}",t)}`,i=await fetch(a,{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);return i.json()}async function V(t){const a=`${P}${O.replace("{id}",t)}`,i=await fetch(a,{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);return i.json()}function H({company:t}){const a=t.im_sector||t.im_code||"",i=t.industry||"",n=[];a&&n.push(a),i&&i!==a&&n.push(i);const c=d=>{if(!d)return"-";try{return new Date(d).toLocaleDateString()}catch{return d}},o=(d,m=0)=>d==null?"-":d.toLocaleString(void 0,{minimumFractionDigits:m,maximumFractionDigits:m}),p=[{label:"Currency",value:t.currency},{label:"Last Trade Date",value:c(t.last_trade_date)},{label:"Current Price",value:o(t.price_local_currency,2)},{label:"Market Cap (USD M)",value:o(t.market_cap_usd,0)}].filter(d=>d.value!==void 0&&d.value!==null);return e.jsx("div",{className:"company-header",style:{padding:"12px 0 24px",textAlign:"left",marginBottom:0,borderBottom:"1px solid var(--app-border)",display:"flex",flexDirection:"column",gap:"20px"},children:e.jsxs("div",{className:"company-header-main",style:{display:"flex",flexWrap:"wrap",justifyContent:"spaceBetween",gap:"28px"},children:[e.jsxs("div",{className:"company-title-block",style:{display:"flex",flexDirection:"column",gap:"16px",flex:"1 1 260px"},children:[e.jsxs("div",{className:"company-title-row",style:{display:"flex",flexWrap:"wrap",alignItems:"baseline",gap:"16px"},children:[e.jsx("h1",{className:"company-name",style:{fontSize:"34px",fontWeight:700,color:"var(--app-heading)",margin:0,letterSpacing:"-0.01em"},children:t.name||"Unknown Company"}),e.jsx("span",{className:"company-ticker",style:{fontSize:"13px",fontWeight:600,letterSpacing:"0.08em",textTransform:"uppercase",padding:"6px 12px",borderRadius:"999px",border:"1px solid var(--app-border)",color:"var(--app-text-muted)"},children:t.ticker||"N/A"})]}),n.length>0&&e.jsx("div",{className:"company-tag-row",style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:n.map((d,m)=>e.jsx("span",{className:"company-tag",style:{display:"inline-flex",alignItems:"center",padding:"6px 12px",borderRadius:"999px",border:"1px solid var(--app-border)",color:"var(--app-text-muted)",fontSize:"13px",fontWeight:500},children:d},m))})]}),p.length>0&&e.jsx("div",{className:"company-meta-list",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"12px 24px",minWidth:"220px"},children:p.map((d,m)=>e.jsxs("div",{className:"company-meta-item",style:{display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsx("span",{className:"company-meta-label",style:{fontSize:"12px",letterSpacing:"0.08em",textTransform:"uppercase",color:"var(--app-text-muted)"},children:d.label}),e.jsx("span",{className:"company-meta-value",style:{fontSize:"16px",fontWeight:600,color:"var(--app-heading)"},children:d.value})]},m))})]})})}function j({title:t,children:a,className:i=""}){return e.jsxs("div",{className:`detail-section app-card ${i}`,style:{overflow:"hidden",border:"1px solid var(--app-border)"},children:[e.jsx("div",{className:"section-header",style:{background:"var(--app-surface-muted)",padding:"18px 24px",borderBottom:"1px solid var(--app-border)",fontWeight:600,color:"var(--app-heading)",fontSize:"16px",letterSpacing:"0.02em"},children:t}),e.jsx("div",{className:"section-content",style:{padding:"22px 24px 24px"},children:a})]})}function s({label:t,value:a,valueClass:i=""}){const n=a==null||a===""?"-":a;return e.jsxs("div",{className:"field-row",style:{display:"grid",gridTemplateColumns:"minmax(0, 1.3fr) minmax(0, 1fr)",gap:"14px",alignItems:"baseline",padding:"12px 0",borderBottom:"1px solid var(--app-border)"},children:[e.jsx("span",{className:"field-label",style:{color:"var(--app-text-muted)",fontSize:"13px",fontWeight:600,letterSpacing:"0.02em",textTransform:"uppercase"},children:t}),e.jsx("span",{className:`field-value ${i}`,style:{fontWeight:600,color:i==="positive"?"var(--app-success)":i==="negative"?"#dc2626":"var(--app-heading)",textAlign:"right",minWidth:0,fontSize:"15px"},children:n})]})}function r(t,a=0){if(t==null||t==="")return"-";const i=typeof t=="string"?parseFloat(t):t;return isNaN(i)?"-":i.toLocaleString(void 0,{minimumFractionDigits:a,maximumFractionDigits:a})}function U(t){if(!t)return"-";try{return new Date(t).toLocaleDateString()}catch{return t}}function T(t){return t?t.im_sector||t.industry||t.im_code||"Unknown Industry Matrix Sector":""}function Y({company:t}){return e.jsxs(j,{title:"Basic Information",children:[e.jsx(s,{label:"Industry Matrix Sector",value:T(t)}),e.jsx(s,{label:"Industry",value:t.industry}),t.sub_industry&&e.jsx(s,{label:"Secondary Industry",value:t.sub_industry}),e.jsx(s,{label:"GICS Industry",value:t.gics_industry}),e.jsx(s,{label:"Currency",value:t.currency}),e.jsx(s,{label:"Last Trade Date",value:U(t.last_trade_date)})]})}function G({company:t}){const a=t.total_return_2018_to_2025,i=a&&a>0?"positive":a&&a<0?"negative":"";return e.jsxs(j,{title:"Market Data",children:[e.jsx(s,{label:"Current Price",value:r(t.price_local_currency,2)}),e.jsx(s,{label:"Previous Close",value:r(t.previous_close,2)}),e.jsx(s,{label:"Market Cap (Local)",value:r(t.market_cap_local,0)}),e.jsx(s,{label:"Market Cap (USD)",value:r(t.market_cap_usd,0)}),e.jsx(s,{label:"52-Week High",value:r(t.price_52w_high,2)}),e.jsx(s,{label:"52-Week Low",value:r(t.price_52w_low,2)}),e.jsx(s,{label:"Total Return 2018-2025",value:a?`${r(a,2)}%`:"-",valueClass:i})]})}function X({company:t}){return e.jsxs(j,{title:"Financial Metrics",children:[e.jsx(s,{label:"Total Revenue",value:r(t.total_revenue_local,0)}),e.jsx(s,{label:"LTM Revenue",value:r(t.ltm_revenue_local,0)}),e.jsx(s,{label:"NTM Revenue",value:r(t.ntm_revenue_local,0)}),e.jsx(s,{label:"Net Profits (FY0)",value:r(t.net_profits_fy0,0)}),e.jsx(s,{label:"Total Assets",value:r(t.total_assets_local,0)}),e.jsx(s,{label:"Net Assets",value:r(t.net_assets_local,0)}),e.jsx(s,{label:"Total Debt",value:r(t.total_debt_local,0)}),e.jsx(s,{label:"Asset Turnover (LTM)",value:r(t.asset_turnover_ltm,2)})]})}function Z({company:t}){const a=t.eps_growth_percent,i=a&&a>0?"positive":a&&a<0?"negative":"";return e.jsxs(j,{title:"Earnings Per Share",children:[e.jsx(s,{label:"EPS (Trailing)",value:r(t.eps_trailing,2)}),e.jsx(s,{label:"EPS Actual (FY0)",value:r(t.eps_actual_fy0,2)}),e.jsx(s,{label:"EPS Forecast (FY1)",value:r(t.eps_forecast_fy1,2)}),e.jsx(s,{label:"EPS Growth (%)",value:a?`${r(a*100,2)}%`:"-",valueClass:i})]})}function K({company:t}){return e.jsxs(j,{title:"Cash Flow & EBITDA",children:[e.jsx(s,{label:"EBITDA (FY0)",value:r(t.ebitda_fy0,0)}),e.jsx(s,{label:"EBITDA (FY-1)",value:r(t.ebitda_fy_minus_1,0)}),e.jsx(s,{label:"Cash Flow Ops (FY0)",value:r(t.cash_flow_operations_fy0,0)}),e.jsx(s,{label:"Cash Flow Ops (FY-1)",value:r(t.cash_flow_operations_fy_minus_1,0)})]})}function Q({company:t}){const a=t.interest_coverage_ratio,i=a&&a>5?"positive":a&&a<2?"negative":"",n=t.debt_to_total_assets,c=n&&n>.6?"negative":n&&n<.3?"positive":"",o=t.debt_to_equity,p=o&&o>1?"negative":o&&o<.5?"positive":"";return e.jsxs(j,{title:"Debt & Interest",children:[e.jsx(s,{label:"Interest Expense (FY0)",value:r(t.interest_expense_fy0,0)}),e.jsx(s,{label:"Effective Interest Rate",value:t.effective_interest_rate?`${r(t.effective_interest_rate*100,2)}%`:"-"}),e.jsx(s,{label:"Interest Coverage Ratio",value:r(a,2),valueClass:i}),e.jsx(s,{label:"Debt to Total Assets",value:n?`${r(n*100,2)}%`:"-",valueClass:c}),e.jsx(s,{label:"Debt to Equity",value:o?`${r(o*100,2)}%`:"-",valueClass:p})]})}function J({company:t}){const a=t.roe_trailing,i=a&&a>.15?"positive":a&&a<.05?"negative":"",n=t.roa_trailing,c=n&&n>.05?"positive":n&&n<.02?"negative":"",o=t.operating_margin_trailing,p=o&&o>.1?"positive":o&&o<.05?"negative":"";return e.jsxs(j,{title:"Valuation & Profitability Ratios",children:[e.jsx(s,{label:"P/E Ratio (TTM)",value:r(t.pe_ratio_trailing,2)}),e.jsx(s,{label:"P/E Ratio (Consensus)",value:r(t.pe_ratio_consensus,2)}),e.jsx(s,{label:"PEG Ratio",value:r(t.peg_ratio,2)}),e.jsx(s,{label:"ROE (TTM)",value:a?`${r(a*100,2)}%`:"-",valueClass:i}),e.jsx(s,{label:"ROA (TTM)",value:n?`${r(n*100,2)}%`:"-",valueClass:c}),e.jsx(s,{label:"Operating Margin (TTM)",value:o?`${r(o*100,2)}%`:"-",valueClass:p}),e.jsx(s,{label:"Operating Profits/Share",value:r(t.operating_profits_per_share,2)}),e.jsx(s,{label:"Operating Leverage",value:r(t.operating_leverage,2)})]})}function ee({company:t}){const a=t.current_ratio,i=a&&a>1.5?"positive":a&&a<1?"negative":"",n=t.quick_ratio,c=n&&n>1?"positive":n&&n<.5?"negative":"";return e.jsxs(j,{title:"Liquidity Ratios",children:[e.jsx(s,{label:"Current Ratio",value:r(a,2),valueClass:i}),e.jsx(s,{label:"Quick Ratio",value:r(n,2),valueClass:c})]})}function te({company:t}){return e.jsxs(j,{title:"Dividend Information",children:[e.jsx(s,{label:"Dividend Yield (FY0)",value:t.dividend_yield_fy0?`${r(t.dividend_yield_fy0*100,2)}%`:"-"}),e.jsx(s,{label:"Dividend Payout Ratio",value:t.dividend_payout_ratio?`${r(t.dividend_payout_ratio*100,2)}%`:"-"}),e.jsx(s,{label:"Dividend (Local Currency)",value:r(t.dividend_local_currency,2)}),e.jsx(s,{label:"Dividend 3yr CAGR",value:t.dividend_3yr_cagr?`${r(t.dividend_3yr_cagr*100,2)}%`:"-"}),e.jsx(s,{label:"Dividend 5yr CAGR",value:t.dividend_5yr_cagr?`${r(t.dividend_5yr_cagr*100,2)}%`:"-"}),e.jsx(s,{label:"Dividend 10yr CAGR",value:t.dividend_10yr_cagr?`${r(t.dividend_10yr_cagr*100,2)}%`:"-"})]})}function ae({company:t}){const a=t.altman_z_score_manufacturing,i=a&&a>2.99?"positive":a&&a<1.81?"negative":"",n=t.altman_z_score_non_manufacturing,c=n&&n>2.6?"positive":n&&n<1.1?"negative":"";return e.jsxs(j,{title:"Risk Assessment (Altman Z-Score)",children:[e.jsx(s,{label:"Z-Score (Manufacturing)",value:r(a,2),valueClass:i}),e.jsx(s,{label:"Z-Score (Non-Manufacturing)",value:r(n,2),valueClass:c})]})}function W({isOpen:t,onClose:a,title:i,children:n}){return v.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),t?e.jsx("div",{className:"modal-overlay active",onClick:a,style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,opacity:1,visibility:"visible",transition:"opacity 0.18s ease, visibility 0.18s ease"},children:e.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),style:{background:"var(--app-surface)",borderRadius:"var(--app-radius-lg)",padding:"24px",maxWidth:"720px",maxHeight:"80vh",overflowY:"auto",margin:"20px",width:"90%",boxShadow:"var(--app-shadow-soft)"},children:[e.jsxs("div",{className:"modal-header",style:{marginBottom:"20px",paddingBottom:"16px",borderBottom:"1px solid var(--app-border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h2",{className:"modal-title",style:{fontSize:"20px",fontWeight:600,color:"var(--app-heading)",margin:0},children:i}),e.jsx("button",{onClick:a,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"var(--app-text-muted)"},children:"×"})]}),e.jsx("div",{className:"modal-body",style:{color:"var(--app-text)",lineHeight:"1.6"},children:n})]})}):null}function ie({isOpen:t,onClose:a,company:i}){if(!i)return null;const n=T(i),c=i.market_cap_usd?`$${r(i.market_cap_usd,0)}M`:"N/A",o=i.pe_ratio_trailing?r(i.pe_ratio_trailing,2):"N/A",p=i.name||"Unknown Company",d=p.includes("Kweichow Moutai")||p.includes("茅台"),m=()=>{let y="energy";if(n){const b=n.toLowerCase();b.includes("energy")?y="energy":(b.includes("supporting")&&b.includes("technolog")||b.includes("technology")||b.includes("tech"))&&(y="supporting-technology")}window.location.href=`/legacy/value-chain/${y}/detail.html?company=${encodeURIComponent(p)}&id=${i.id}`};return e.jsxs(W,{isOpen:t,onClose:a,title:"Value Chain Analysis",children:[e.jsxs("div",{className:"modal-section",style:{marginBottom:"16px"},children:[e.jsx(N,{label:"Company",value:p}),e.jsx(N,{label:"Industry Matrix Sector",value:n}),e.jsx(N,{label:"Market Cap",value:c}),e.jsx(N,{label:"P/E Ratio",value:o})]}),d?e.jsx(se,{}):e.jsx(ne,{imSector:n,companyName:p}),e.jsx("div",{style:{marginTop:"24px",textAlign:"center"},children:e.jsx("button",{className:"button button-secondary",onClick:m,style:{background:"var(--app-surface-muted)",color:"var(--app-heading)",border:"1px solid var(--app-border)",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"View Detail"})})]})}function N({label:t,value:a}){return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.1fr) minmax(0, 1fr)",gap:"12px",marginBottom:"8px",fontSize:"14px",alignItems:"baseline"},children:[e.jsx("span",{style:{color:"var(--app-text-muted)",fontWeight:500},children:t}),e.jsx("span",{style:{color:"var(--app-heading)",fontWeight:600,textAlign:"right"},children:a})]})}function A({title:t,children:a}){return e.jsxs("div",{className:"modal-breakdown",style:{margin:"16px 0",padding:"12px 0",borderTop:"1px solid #eaecf0",borderBottom:"1px solid #eaecf0"},children:[e.jsx("h4",{style:{color:"#1f2937",margin:"0 0 12px 0",fontSize:"16px"},children:t}),a]})}function g({label:t,value:a}){return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.1fr) minmax(0, 1fr)",gap:"12px",alignItems:"baseline",marginBottom:"8px"},children:[e.jsx("span",{style:{color:"var(--app-text-muted)",fontWeight:500,fontSize:"13px"},children:t}),e.jsx("span",{style:{color:"var(--app-heading)",fontWeight:600,fontSize:"13px",textAlign:"right"},children:a})]})}function E({children:t}){return e.jsx("div",{style:{color:"var(--app-text)",background:"var(--app-surface-muted)",borderRadius:"var(--app-radius-md)",padding:"12px",marginTop:"12px",fontSize:"14px"},children:t})}function se(){return e.jsxs(e.Fragment,{children:[e.jsxs(A,{title:"Primary Value Chain Activities",children:[e.jsx(g,{label:"Inbound Logistics",value:"Premium sorghum sourcing from local farms"}),e.jsx(g,{label:"Operations",value:"Traditional fermentation & distillation processes"}),e.jsx(g,{label:"Outbound Logistics",value:"Controlled distribution network nationwide"}),e.jsx(g,{label:"Marketing & Sales",value:"Premium brand positioning & cultural heritage"}),e.jsx(g,{label:"Service",value:"Customer education & brand experience"})]}),e.jsxs(A,{title:"Support Activities",children:[e.jsx(g,{label:"Technology Development",value:"Traditional brewing technology & quality control"}),e.jsx(g,{label:"Human Resources",value:"Master distillers & skilled craftsmen"}),e.jsx(g,{label:"Procurement",value:"Long-term supplier relationships"}),e.jsx(g,{label:"Infrastructure",value:"Corporate governance & financial management"})]}),e.jsxs(E,{children:[e.jsx("strong",{children:"Value Chain Summary:"})," Kweichow Moutai's integrated value chain leverages traditional craftsmanship, premium raw materials, and controlled distribution to maintain market leadership. The company's value creation spans from specialized sorghum sourcing through heritage-based production to premium brand positioning, delivering exceptional margins and customer loyalty."]})]})}function ne({imSector:t,companyName:a}){return e.jsxs(e.Fragment,{children:[e.jsxs(A,{title:"Value Chain Stages",children:[e.jsx(g,{label:"Upstream Activities",value:"Raw material sourcing and supplier relationships"}),e.jsx(g,{label:"Core Operations",value:"Production processes and operational efficiency"}),e.jsx(g,{label:"Midstream Processing",value:"Value-added processing and quality control"}),e.jsx(g,{label:"Downstream Distribution",value:"Market channels and customer delivery"}),e.jsx(g,{label:"End Customer Markets",value:"Final consumption and customer satisfaction"})]}),e.jsxs(E,{children:[e.jsx("strong",{children:"Value Chain Summary:"})," Comprehensive analysis of ",a,"'s value creation process from upstream activities to end customer delivery. This summary provides an overview of key operational stages, competitive positioning, and strategic value drivers within the ",t," sector."]})]})}function re({isOpen:t,onClose:a,company:i}){const[n,c]=v.useState(null),[o,p]=v.useState(!1),[d,m]=v.useState(null);v.useEffect(()=>{t&&i&&y()},[t,i]);const y=async()=>{if(i){p(!0),m(null);try{const l=await V(String(i.id));c(l)}catch(l){m(l instanceof Error?l.message:"Failed to load comparison data")}finally{p(!1)}}},b=l=>l>=75?"Market Leader":l>=50?"Mid-Tier":l>=25?"Competitor":"Follower",M=l=>{if(l%100>=11&&l%100<=13)return"th";switch(l%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}};if(!i)return null;const D=n&&(n.industry||n.im_sector)||T(i);return e.jsxs(W,{isOpen:t,onClose:a,title:"Industry Matrix Sector Peers Comparison",children:[e.jsxs("div",{className:"modal-section",children:[e.jsxs("div",{className:"modal-row",style:{display:"grid",gridTemplateColumns:"minmax(0, 1.1fr) minmax(0, 1fr)",gap:"12px",marginBottom:"8px",fontSize:"14px",alignItems:"baseline"},children:[e.jsx("span",{className:"modal-label",style:{color:"var(--app-text-muted)",fontWeight:500},children:"Company"}),e.jsx("span",{className:"modal-value",style:{color:"var(--app-heading)",fontWeight:600,textAlign:"right"},children:i.name||"Unknown Company"})]}),e.jsxs("div",{className:"modal-row",style:{display:"grid",gridTemplateColumns:"minmax(0, 1.1fr) minmax(0, 1fr)",gap:"12px",marginBottom:"8px",fontSize:"14px",alignItems:"baseline"},children:[e.jsx("span",{className:"modal-label",style:{color:"var(--app-text-muted)",fontWeight:500},children:"Industry Matrix Sector"}),e.jsx("span",{className:"modal-value",style:{color:"var(--app-heading)",fontWeight:600,textAlign:"right"},children:D})]})]}),o&&e.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[e.jsx("div",{style:{display:"inline-block",width:"20px",height:"20px",border:"2px solid #f3f3f3",borderTop:"2px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("p",{style:{marginTop:"10px",color:"#666"},children:"Loading IM sector peers comparison..."}),e.jsx("style",{children:"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }"})]}),d&&e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#dc3545"},children:[e.jsx("h3",{children:"Unable to Load Comparison Data"}),e.jsx("p",{style:{margin:"15px 0",color:"#666"},children:d}),e.jsx("button",{onClick:y,style:{padding:"10px 20px",background:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Retry"})]}),!o&&!d&&n&&e.jsxs(e.Fragment,{children:[(()=>{const l=n.target_company.rank,h=n.total_companies_in_industry,x=Math.round((h-l)/(h-1)*100);let u="#e74c3c";return x>=75?u="#27ae60":x>=50?u="#f39c12":x>=25&&(u="#f1c40f"),e.jsxs("div",{style:{marginTop:"20px",padding:"15px 0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{background:u,color:"white",padding:"4px 10px",borderRadius:"4px",fontWeight:600,fontSize:"13px"},children:["#",l," / ",h]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600,color:"#2c3e50",fontSize:"14px"},children:"Industry Matrix Sector Ranking"}),e.jsxs("span",{style:{fontSize:"12px",color:"#6c757d",marginLeft:"8px"},children:[b(x)," Position"]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("span",{style:{fontSize:"11px",color:"#6c757d",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Percentile"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:u},children:x===100?"Market Leader":x===0?"Last Position":x<50?`Bottom ${x}%`:`Top ${100-x}%`})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"end",height:"35px",width:"100%"},children:Array.from({length:h},(C,_)=>{const f=h-_,S=f===l,w=Math.abs(f-l);let k=8;S?k=35:w===1?k=22:w===2&&(k=14);let R="#e0e0e0";S?R=u:w===1?R=`${u}80`:w===2&&(R=`${u}40`);const $=`calc((100% - ${(h-1)*2}px) / ${h})`;return e.jsx("div",{style:{width:$,height:`${k}px`,background:R,borderRadius:S?"4px":"2px",marginRight:_<h-1?"2px":"0",transition:"all 0.4s ease",boxShadow:S?"0 2px 12px rgba(0,0,0,0.15)":"none"}},f)})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px",fontSize:"11px",color:"#95a5a6",fontWeight:500},children:[e.jsx("span",{children:"Followers"}),e.jsx("span",{children:"Mid-Tier"}),e.jsx("span",{children:"Market Leader"})]})]})})(),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 90px 80px 80px 90px",gap:"15px",padding:"10px 0",borderBottom:"1px solid rgba(0,0,0,0.08)",fontWeight:600,color:"#495057",fontSize:"12px",alignItems:"center"},children:[e.jsx("div",{children:"Company"}),e.jsx("div",{style:{textAlign:"right"},children:"Market Cap"}),e.jsx("div",{style:{textAlign:"right"},children:"P/E Ratio"}),e.jsx("div",{style:{textAlign:"right"},children:"ROE (%)"}),e.jsx("div",{style:{textAlign:"right"},children:"OM (% TTM)"})]}),n.comparison_data.map((l,h)=>{const x=l.is_current_company,u=l.rank;let C=null;if(x)C=e.jsxs("span",{style:{background:"#666",color:"white",fontSize:"10px",fontWeight:600,padding:"3px 8px",borderRadius:"3px",lineHeight:1,marginRight:"8px"},children:[u,M(u)]});else if(u<=3){const _=["#e74c3c","#f39c12","#27ae60"],f=["1st","2nd","3rd"];C=e.jsx("span",{style:{background:_[u-1],color:"white",fontSize:"10px",fontWeight:600,padding:"3px 8px",borderRadius:"3px",lineHeight:1,marginRight:"8px"},children:f[u-1]})}return e.jsxs("div",{style:{padding:"15px 0",borderBottom:"1px solid rgba(0,0,0,0.08)"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 90px 80px 80px 90px",gap:"15px",alignItems:"center",marginBottom:"8px"},children:[e.jsx("strong",{style:{color:"#2c3e50",fontSize:"14px"},children:l.name}),e.jsx("span",{style:{textAlign:"right",fontWeight:500,color:"#2c3e50",fontSize:"13px"},children:l.market_cap_display||"-"}),e.jsx("span",{style:{textAlign:"right",fontWeight:500,color:"#2c3e50",fontSize:"13px"},children:l.pe_ratio_display||"-"}),e.jsx("span",{style:{textAlign:"right",fontWeight:500,color:"#2c3e50",fontSize:"13px"},children:l.roe_display||"-"}),e.jsx("span",{style:{textAlign:"right",fontWeight:500,color:"#2c3e50",fontSize:"13px"},children:l.operating_margin_display||"-"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[C,e.jsx("span",{style:{color:"#7f8c8d",fontWeight:500,fontSize:"13px"},children:l.ticker}),x&&e.jsxs("span",{style:{color:"#2196f3",fontSize:"11px",fontWeight:600,marginLeft:"10px",display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{display:"inline-block",width:"6px",height:"6px",background:"#2196f3",borderRadius:"50%",marginRight:"6px",boxShadow:"0 0 8px rgba(33, 150, 243, 0.4), 0 0 3px rgba(33, 150, 243, 0.6)"}}),"Current Company"]})]})]},h)})]})]})]})}function le(){const[t,a]=v.useState(null),[i,n]=v.useState(!0),[c,o]=v.useState(null),[p,d]=v.useState(!1),[m,y]=v.useState(!1);v.useEffect(()=>{const _=new URLSearchParams(window.location.search).get("id");if(!_){o("No company ID provided"),n(!1);return}q(_).then(f=>{a(f),document.title=`${f.name||"Company"} - Chinese Stock Dashboard`}).catch(f=>{o(f instanceof Error?f.message:"Failed to load company details")}).finally(()=>{n(!1)})},[]);const b=()=>{t&&(`${encodeURIComponent(t.name)}${t.id}`,window.location.href=`/investment-summary-detail.html?company=${encodeURIComponent(t.name)}&id=${t.id}`)};if(i)return e.jsxs(e.Fragment,{children:[e.jsx(I,{companyContext:t?{id:String(t.id),name:t.name,imSector:t.im_sector}:void 0}),e.jsx("div",{className:"container app-shell",children:e.jsx("div",{className:"loading",style:{textAlign:"center",padding:"48px",color:"var(--app-text-muted)"},children:e.jsx("p",{children:"Loading company details..."})})})]});if(c||!t)return e.jsxs(e.Fragment,{children:[e.jsx(I,{companyContext:t?{id:String(t.id),name:t.name,imSector:t.im_sector}:void 0}),e.jsx("div",{className:"container app-shell",children:e.jsx("div",{className:"error app-notice",style:{marginBottom:"16px"},children:c||"Company not found"})})]});const M=t.eps_trailing||t.eps_actual_fy0||t.eps_forecast_fy1||t.eps_growth_percent,D=t.ebitda_fy0||t.ebitda_fy_minus_1||t.cash_flow_operations_fy0||t.cash_flow_operations_fy_minus_1,l=t.current_ratio||t.quick_ratio,h=t.interest_expense_fy0||t.effective_interest_rate||t.interest_coverage_ratio||t.debt_to_total_assets||t.debt_to_equity,x=t.dividend_yield_fy0||t.dividend_payout_ratio||t.dividend_local_currency||t.dividend_3yr_cagr||t.dividend_5yr_cagr||t.dividend_10yr_cagr,u=t.altman_z_score_manufacturing||t.altman_z_score_non_manufacturing;return e.jsxs(e.Fragment,{children:[e.jsx(I,{companyContext:t?{id:String(t.id),name:t.name,imSector:t.im_sector}:void 0}),e.jsxs("div",{className:"container app-shell",style:{padding:"80px 24px 48px",maxWidth:"1536px",margin:"0 auto"},children:[e.jsx(H,{company:t}),t.business_description&&e.jsx("div",{className:"company-description-wrapper",style:{marginBottom:"32px",padding:"24px 0"},children:e.jsxs("div",{className:"company-description-section",style:{background:"var(--app-surface)",borderRadius:"var(--app-radius-md)",padding:"22px 24px 24px",boxShadow:"var(--app-shadow-subtle)"},children:[e.jsx("h3",{className:"company-description-header",style:{fontSize:"16px",fontWeight:600,color:"var(--app-heading)",margin:"0 0 16px 0"},children:"Company Description"}),e.jsx("p",{className:"company-description-text",style:{lineHeight:1.6,color:"var(--app-text)",margin:0,fontSize:"14px"},children:t.business_description})]})}),e.jsxs("div",{className:"company-actions-section app-actions",style:{margin:"24px 0 32px",display:"flex",flexWrap:"wrap",gap:"12px",justifyContent:"flex-start"},children:[e.jsx("button",{className:"button button-primary app-button app-button--primary",onClick:()=>d(!0),children:"Value Chain Analysis"}),e.jsx("button",{className:"button button-primary app-button app-button--primary",onClick:b,children:"Investment Summary"}),e.jsx("button",{className:"button button-primary app-button app-button--primary",onClick:()=>y(!0),children:"Industry Matrix Sector Peers Comparison"})]}),e.jsxs("div",{className:"details-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))",gap:"28px",alignItems:"stretch"},children:[e.jsx(Y,{company:t}),e.jsx(G,{company:t}),e.jsx(X,{company:t}),M&&e.jsx(Z,{company:t}),D&&e.jsx(K,{company:t}),e.jsx(J,{company:t}),l&&e.jsx(ee,{company:t}),h&&e.jsx(Q,{company:t}),x&&e.jsx(te,{company:t}),u&&e.jsx(ae,{company:t})]}),e.jsx(ie,{isOpen:p,onClose:()=>d(!1),company:t}),e.jsx(re,{isOpen:m,onClose:()=>y(!1),company:t})]})]})}const z=document.getElementById("root");if(!z)throw new Error("Root element not found");F.createRoot(z).render(e.jsx(L.StrictMode,{children:e.jsx(le,{})}));
